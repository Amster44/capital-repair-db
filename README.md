# üè¢ Capital Repair Database System

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–∞–ø–∏—Ç–∞–ª—å–Ω–æ–º —Ä–µ–º–æ–Ω—Ç–µ –º–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã—Ö –¥–æ–º–æ–≤ –¥–ª—è –ü—Ä–∏–≤–æ–ª–∂—Å–∫–æ–≥–æ –§–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –û–∫—Ä—É–≥–∞ (14 —Ä–µ–≥–∏–æ–Ω–æ–≤).

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –ª–∏—Ñ—Ç–æ–≤ –¥–æ–º–∞–º —Å:
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏ –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞ (UK/TSJ/JSK)
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º –æ—Å—Ç–∞—Ç–∫–æ–º —Å—Ä–µ–¥—Å—Ç–≤ (‚â•2-5 –º–ª–Ω —Ä—É–±)
- –õ–∏—Ñ—Ç–∞–º–∏, —Ç—Ä–µ–±—É—é—â–∏–º–∏ –∑–∞–º–µ–Ω—ã –≤ –±–ª–∏–∂–∞–π—à–∏–µ –≥–æ–¥—ã
- **–ü–æ–ª–Ω—ã–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π**

## üìä –û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö

- **150,000-200,000 –¥–æ–º–æ–≤** –≤ 14 —Ä–µ–≥–∏–æ–Ω–∞—Ö –ü–§–û
- **150,000-200,000 –ª–∏—Ñ—Ç–æ–≤**
- **~3,500 –£–ö/–¢–°–ñ/–ñ–°–ö** —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (97% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **~30,000-40,000 —Ü–µ–ª–µ–≤—ã—Ö –¥–æ–º–æ–≤** —Å–æ —Å–ø–µ—Ü—Å—á–µ—Ç–∞–º–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- **19 —Ç–∞–±–ª–∏—Ü**: —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, –¥–æ–º–∞, –ª–∏—Ñ—Ç—ã, –£–ö, CRM
- **4 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è**: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ü–µ–ª–µ–≤—ã–µ –¥–æ–º–∞, –≤–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- **–†–∞–∑–º–µ—Ä –ë–î**: ~500 –ú–ë - 1 –ì–ë (14 —Ä–µ–≥–∏–æ–Ω–æ–≤)

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
1. **CSV —Ñ–∞–π–ª—ã** —Å —Ñ–æ–Ω–¥-–∫—Ä.—Ä—Ñ - –¥–∞–Ω–Ω—ã–µ –æ –¥–æ–º–∞—Ö –∏ –ª–∏—Ñ—Ç–∞—Ö
2. **OJF —Ñ–∞–π–ª—ã** –∏–∑ –ì–ò–° –ñ–ö–• - —Å–≤—è–∑–∏ –¥–æ–º ‚Üí –£–ö (–û–ì–†–ù)
3. **–†–µ–µ—Å—Ç—Ä –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - –∫–æ–Ω—Ç–∞–∫—Ç—ã –£–ö (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, email, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Backend**: Python 3.x, psycopg2, pandas
- **Database**: PostgreSQL 14+
- **Import**: Batch processing (1000 records/batch)
- **API** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è): FastAPI, SQLAlchemy
- **Frontend** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è): React/Vue

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (Windows)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL**
   ```bash
   install_postgres.bat
   ```

2. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
   ```bash
   setup_database.bat
   ```

3. **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ**
   ```bash
   import_data.bat         # –î–æ–º–∞ –∏ –ª–∏—Ñ—Ç—ã
   import_ojf.bat          # –°–≤—è–∑–∏ —Å –£–ö
   import_registry.bat     # –ö–æ–Ω—Ç–∞–∫—Ç—ã –£–ö
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   ```bash
   check_data.bat
   ```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [START_HERE_RU.md](START_HERE_RU.md)

### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Linux)

**–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [DEPLOY_TO_SERVER.md](DEPLOY_TO_SERVER.md)

–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git clone https://github.com/YOUR_USERNAME/capital-repair-db.git
cd capital-repair-db
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (CSV, OJF, XLSX) —á–µ—Ä–µ–∑ rsync/scp
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
psql -U postgres -d capital_repair_db -f database/001_initial_schema.sql
psql -U postgres -d capital_repair_db -f database/002_views_and_data.sql

cd scripts
python import_csv.py --region 16  # –¢–µ—Å—Ç –Ω–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω–µ
python import_ojf.py --region 16
python import_registry.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
capital-repair-db/
‚îú‚îÄ‚îÄ database/              # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ scripts/               # Python —Å–∫—Ä–∏–ø—Ç—ã –∏–º–ø–æ—Ä—Ç–∞
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ data/                  # –î–∞–Ω–Ω—ã–µ (–ù–ï –≤ Git!)
‚îÇ   ‚îú‚îÄ‚îÄ regions/          # CSV —Ñ–∞–π–ª—ã (2+ –ì–ë)
‚îÇ   ‚îú‚îÄ‚îÄ ojf_data/         # OJF —Ñ–∞–π–ª—ã (500 –ú–ë)
‚îÇ   ‚îî‚îÄ‚îÄ uk_data/          # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ *.bat                  # Batch —Ñ–∞–π–ª—ã –¥–ª—è Windows
‚îî‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `buildings` - –î–æ–º–∞ (houseguid, –∞–¥—Ä–µ—Å, –±–∞–ª–∞–Ω—Å –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞)
- `lifts` - –õ–∏—Ñ—Ç—ã (–¥–∞—Ç–∞ –≤–≤–æ–¥–∞, —Å—Ä–æ–∫ —Å–ª—É–∂–±—ã, –¥–∞—Ç–∞ –≤—ã–≤–æ–¥–∞)
- `management_companies` - –£–ö/–¢–°–ñ/–ñ–°–ö (–û–ì–†–ù, –∫–æ–Ω—Ç–∞–∫—Ç—ã)
- `construction_elements` - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- `services` - –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏

### CRM –º–æ–¥—É–ª—å
- `deals` - –°–¥–µ–ª–∫–∏
- `contacts` - –ö–æ–Ω—Ç–∞–∫—Ç—ã
- `activities` - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∑–≤–æ–Ω–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Views)
- `v_target_buildings` - –¶–µ–ª–µ–≤—ã–µ –¥–æ–º–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- `v_sales_pipeline` - –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- `v_regional_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- `v_top_management_companies` - –¢–æ–ø –£–ö

**–ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞:** [docs/DATABASE_SCHEMA.md](docs/DATABASE_SCHEMA.md)

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [START_HERE_RU.md](START_HERE_RU.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
- [READY_TO_START.md](READY_TO_START.md) - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- [DEPLOY_TO_SERVER.md](DEPLOY_TO_SERVER.md) - –î–µ–ø–ª–æ–π –Ω–∞ Timeweb Cloud
- [DATABASE_SCHEMA.md](docs/DATABASE_SCHEMA.md) - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- [UK_DATA_SOURCES.md](docs/UK_DATA_SOURCES.md) - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üîç –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –¶–µ–ª–µ–≤—ã–µ –¥–æ–º–∞ —Å HIGH –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
```sql
SELECT
  address,
  overhaul_funds_balance,
  lifts_count,
  uk_name,
  uk_phone,
  uk_email
FROM v_target_buildings
WHERE priority = 'HIGH'
ORDER BY overhaul_funds_balance DESC
LIMIT 50;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
```sql
SELECT * FROM v_regional_stats;
```

### –¢–æ–ø –£–ö –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ–º–æ–≤
```sql
SELECT * FROM v_top_management_companies LIMIT 10;
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ Git
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` –¥–ª—è credentials
- –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å `scripts/config.py.template` ‚Üí `scripts/config.py` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏
- –î–∞–Ω–Ω—ã–µ (CSV, XLSX) –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ rsync/scp

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ (Windows)
- Python 3.8+
- PostgreSQL 14+
- 10+ –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Linux)
- Ubuntu 20.04+ / Debian 11+
- Python 3.8+
- PostgreSQL 14+
- 20+ –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- 4+ –ì–ë RAM

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–æ–º–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

- **HIGH**: –ë–∞–ª–∞–Ω—Å ‚â•5M, –∑–∞–º–µ–Ω–∞ –ª–∏—Ñ—Ç–æ–≤ ‚â§2 –≥–æ–¥–∞, –µ—Å—Ç—å —Å–ø–µ—Ü—Å—á–µ—Ç
- **MEDIUM**: –ë–∞–ª–∞–Ω—Å ‚â•2M, –∑–∞–º–µ–Ω–∞ –ª–∏—Ñ—Ç–æ–≤ ‚â§5 –ª–µ—Ç, –µ—Å—Ç—å —Å–ø–µ—Ü—Å—á–µ—Ç
- **LOW**: –ë–∞–ª–∞–Ω—Å >0, –µ—Å—Ç—å –ª–∏—Ñ—Ç—ã, –µ—Å—Ç—å —Å–ø–µ—Ü—Å—á–µ—Ç

## üìû –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å

–ü—Ä–æ–¥–∞–∂–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏—Ñ—Ç–æ–≤:
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –æ—Ç 2,400,000 —Ä—É–± –∑–∞ 1 –ª–∏—Ñ—Ç
- **–£—Å–ª–æ–≤–∏—è:** –º–∏–Ω–∏–º—É–º 50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
- **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:** –£–ö/–¢–°–ñ/–ñ–°–ö —Å–æ —Å–ø–µ—Ü—Å—á–µ—Ç–∞–º–∏

## üöß Roadmap

- [x] –°—Ö–µ–º–∞ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV
- [x] –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –¥–æ–º–æ–≤ —Å –£–ö (OJF)
- [x] –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –£–ö (Registry)
- [x] –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (FastAPI + React)
- [ ] CRM –º–æ–¥—É–ª—å
- [ ] –î–∞—à–±–æ—Ä–¥ –∏ –æ—Ç—á–µ—Ç—ã
- [ ] REST API
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∏–µ–π
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üë• –ö–æ–º–∞–Ω–¥–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–¥–∞–∂ –ª–∏—Ñ—Ç–æ–≤.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∞–Ω–∏–∏

---

**–ù–∞—á–Ω–∏—Ç–µ —Å:** [START_HERE_RU.md](START_HERE_RU.md) ‚≠ê
